
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.8">
    
    
      
        <title>5-State Model - Retirement Income Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6e60f8b8.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="deep-purple" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5-state-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Retirement Income Toolkit" class="md-header__button md-logo" aria-label="Retirement Income Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Retirement Income Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5-State Model
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/print-hi/retirement-toolkit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Home/start/" class="md-tabs__link">
        Overview
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Aggregate%20Mortality/overview/" class="md-tabs__link">
        Aggregate Mortality
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../overview/" class="md-tabs__link md-tabs__link--active">
        Health State
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Economic%20Scenario%20Generator/overview/" class="md-tabs__link">
        Economic Scenario Generator
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Policy%20Valuation/overview/" class="md-tabs__link">
        Policy Valuation
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Retirement Income Toolkit" class="md-nav__button md-logo" aria-label="Retirement Income Toolkit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Retirement Income Toolkit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/print-hi/retirement-toolkit/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Overview" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Overview
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Home/start/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Home/about/" class="md-nav__link">
        About
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Home/log/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Aggregate Mortality
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Aggregate Mortality" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Aggregate Mortality
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/rate_change/" class="md-nav__link">
        Mortality Rate Changing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/rate_completion/" class="md-nav__link">
        Mortality Rate Completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/period_cohort/" class="md-nav__link">
        Period and Cohort Rates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/rate_survival/" class="md-nav__link">
        Mortality Rate and Survival Function
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/risk_neutral/" class="md-nav__link">
        Risk Neutral Probability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/simulation/" class="md-nav__link">
        Simulating Life Paths
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Aggregate%20Mortality/stats_functions/" class="md-nav__link">
        Summary Statistics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Health State
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Health State" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Health State
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Multi-State Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Multi-State Model" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Multi-State Model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Multi%20State%20Model/3_state_model/" class="md-nav__link">
        3-State Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Multi%20State%20Model/5_state_model/" class="md-nav__link">
        5-State Model
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Cox Hazard Regression
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cox Hazard Regression" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Cox Hazard Regression
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Cox%20Hazard%20Regression/cox_model_3/" class="md-nav__link">
        3-State Model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Cox%20Hazard%20Regression/cox_model_5/" class="md-nav__link">
        5-State Model
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../trans_probs/" class="md-nav__link">
        Transition Probability Matrix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lifetable/" class="md-nav__link">
        Life Table Generation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../simulation/" class="md-nav__link">
        Simulating Life Paths
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" type="checkbox" id="__nav_4_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_7">
          Statistics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Statistics" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Statistics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stats_3/" class="md-nav__link">
        3-State Model
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          5-State Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        5-State Model
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#average-first-time-entering-state" class="md-nav__link">
    Average First Time Entering State
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#total-time-spent-in-state" class="md-nav__link">
    Total Time Spent in State
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#produce-mean-and-variance-from-output" class="md-nav__link">
    Produce Mean and Variance from Output
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../workflow/" class="md-nav__link">
        Workflow Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Economic Scenario Generator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Economic Scenario Generator" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Economic Scenario Generator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Economic%20Scenario%20Generator/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Economic%20Scenario%20Generator/discrete_esg/" class="md-nav__link">
        Discrete-Time Generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Economic%20Scenario%20Generator/cts_esg/" class="md-nav__link">
        Continuous-Time Generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Policy Valuation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Policy Valuation" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Policy Valuation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Policy%20Valuation/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Policy%20Valuation/policy/" class="md-nav__link">
        Creating Policy Object
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Policy%20Valuation/cashflow/" class="md-nav__link">
        Simulating Cashflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Policy%20Valuation/pricing/" class="md-nav__link">
        Pricing / Valuation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Policy%20Valuation/workflow/" class="md-nav__link">
        Workflow Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#average-first-time-entering-state" class="md-nav__link">
    Average First Time Entering State
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#total-time-spent-in-state" class="md-nav__link">
    Total Time Spent in State
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#produce-mean-and-variance-from-output" class="md-nav__link">
    Produce Mean and Variance from Output
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/print-hi/retirement-toolkit/edit/master/docs/Health/Statistics/stats_5.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="5-state-model">5-State Model</h1>
<p>With the use of simulated paths, a lot of mortality statistics can be generated 
to analyse or simply gain insight into the survival characteristics of certain individuals. </p>
<p>For the 5 state model, we use the simulated paths as inputs to calculate:</p>
<ul>
<li>
<p>the average time of entering a certain state (such as the D state: Healthy and functionally disabled)</p>
</li>
<li>
<p>the total time spent in each state </p>
</li>
</ul>
<p>As results are stochastic (statistics are derived from random simulated lifetimes), we can 
also study the variance of these statistics. This will be beneficial in quantifying the risk, 
allowing for more robust pricing methods. </p>
<hr />
<h3 id="average-first-time-entering-state">Average First Time Entering State</h3>
<p><strong>health5_first_time_stats(simulated_path, state)</strong></p>
<p>&nbsp;&nbsp; <strong>Parameters:</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; simulated_path : matrix</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>matrix containing life time simulations, obtained from function "simulate_health_state_paths"</em></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; state : numeric</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>integer denoting which state we are entering or leaving</em></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 for first time leaving H state, only used when initial state is 0</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 for first time entering M state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 for first time entering D state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 for first time entering MD state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -1 for first time entering the dead state</p>
<p>&nbsp;&nbsp; <strong>Returns:</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; column vector of first time entering the specified state</p>
<p>&nbsp;&nbsp; <strong>Usage:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># simulation of 10000 males aged 65 initially healthy under the trend model</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="n">trans_probs</span> <span class="o">&lt;-</span> <span class="nf">get_trans_probs</span><span class="p">(</span><span class="n">n_states</span><span class="o">=</span><span class="m">5</span><span class="p">,</span> <span class="n">model_type</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="n">param_file</span><span class="o">=</span><span class="n">US_HRS_5</span><span class="p">,</span> <span class="n">init_age</span><span class="o">=</span><span class="m">65</span><span class="p">,</span> <span class="n">female</span><span class="o">=</span><span class="m">0</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="m">2012</span><span class="p">,</span> <span class="n">wave_index</span> <span class="o">=</span> <span class="m">8</span><span class="p">,</span> <span class="n">latent</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="n">simulated_path</span> <span class="o">&lt;-</span> <span class="nf">simulate_health_state_paths</span><span class="p">(</span><span class="n">trans_probs</span><span class="p">,</span> <span class="n">init_age</span><span class="o">=</span><span class="m">65</span><span class="p">,</span> <span class="n">init_state</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">cohort</span> <span class="o">=</span> <span class="m">10000</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="c1"># time until entering M state, ill health but not functionally disabled</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="n">time_to_M</span> <span class="o">&lt;-</span> <span class="nf">health5_first_time_stats</span><span class="p">(</span><span class="n">simulated_path</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="c1"># average initial time of entering state 1</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="nf">print</span><span class="p">(</span><span class="nf">mean</span><span class="p">(</span><span class="n">time_to_M</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span>
</code></pre></div>
<hr />
<h3 id="total-time-spent-in-state">Total Time Spent in State</h3>
<p><strong>health5_total_time_stats(simulated_path, state)</strong></p>
<p>&nbsp;&nbsp; <strong>Parameters:</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; simulated_path : matrix</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>matrix containing life time simulations, obtained from function "simulate_health_state_paths"</em></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; state : numeric</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>integer denoting which state we are counting</em></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 for total time in H state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 for total time in M state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 for total time in D state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 for total time in MD state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -1 for total time in dead state</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 for total time alive or not in dead state</p>
<p>&nbsp;&nbsp; <strong>Returns:</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; column vector of total times spent in specified state</p>
<p>&nbsp;&nbsp; <strong>Usage:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1"># simulation of 10000 males aged 65 initially healthy under the trend model</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">trans_probs</span> <span class="o">&lt;-</span> <span class="nf">get_trans_probs</span><span class="p">(</span><span class="n">n_states</span><span class="o">=</span><span class="m">5</span><span class="p">,</span> <span class="n">model_type</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="n">param_file</span><span class="o">=</span><span class="n">US_HRS_5</span><span class="p">,</span> <span class="n">init_age</span><span class="o">=</span><span class="m">65</span><span class="p">,</span> <span class="n">female</span><span class="o">=</span><span class="m">0</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="m">2012</span><span class="p">,</span> <span class="n">wave_index</span> <span class="o">=</span> <span class="m">8</span><span class="p">,</span> <span class="n">latent</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="n">simulated_path</span> <span class="o">&lt;-</span> <span class="nf">simulate_health_state_paths</span><span class="p">(</span><span class="n">trans_probs</span><span class="p">,</span> <span class="n">init_age</span><span class="o">=</span><span class="m">65</span><span class="p">,</span> <span class="n">init_state</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">cohort</span> <span class="o">=</span> <span class="m">10000</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="c1"># total time spent in MD state, ill health and functionally disabled </span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="n">total_state_MD</span> <span class="o">&lt;-</span> <span class="nf">health5_total_time_stats</span><span class="p">(</span><span class="n">simulated_path</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="c1"># average time spent in state MD</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="nf">print</span><span class="p">(</span><span class="nf">mean</span><span class="p">(</span><span class="n">total_state_MD</span><span class="p">))</span>
</code></pre></div>
<hr />
<h3 id="produce-mean-and-variance-from-output">Produce Mean and Variance from Output</h3>
<p>This function is a 'helper' function, used in conjunction with the ouput of the 
previous functions to create the mean and variance of those statistics. </p>
<p><strong>health5_stats_produce(input)</strong></p>
<p>&nbsp;&nbsp; <strong>Parameters:</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; input : matrix</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <em>n<span class="arithmatex">\(\times\)</span>1 matrix of statistics</em></p>
<p>&nbsp;&nbsp; <strong>Returns</strong></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp; mean and variance of the statistics inputted</p>
<p>&nbsp;&nbsp; <strong>Usage:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># simulation of 10000 males aged 65 initially healthy under the trend model</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="n">trans_probs</span> <span class="o">&lt;-</span> <span class="nf">get_trans_probs</span><span class="p">(</span><span class="n">n_states</span><span class="o">=</span><span class="m">5</span><span class="p">,</span> <span class="n">model_type</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="n">param_file</span><span class="o">=</span><span class="n">US_HRS_5</span><span class="p">,</span> <span class="n">init_age</span><span class="o">=</span><span class="m">65</span><span class="p">,</span> <span class="n">female</span><span class="o">=</span><span class="m">0</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="m">2012</span><span class="p">,</span> <span class="n">wave_index</span> <span class="o">=</span> <span class="m">8</span><span class="p">,</span> <span class="n">latent</span> <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="n">simulated_path</span> <span class="o">&lt;-</span> <span class="nf">simulate_health_state_paths</span><span class="p">(</span><span class="n">trans_probs</span><span class="p">,</span> <span class="n">init_age</span><span class="o">=</span><span class="m">65</span><span class="p">,</span> <span class="n">init_state</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">cohort</span> <span class="o">=</span> <span class="m">10000</span><span class="p">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="c1"># time until entering M state, ill health but not functionally disabled</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">time_to_M</span> <span class="o">&lt;-</span> <span class="nf">health5_first_time_stats</span><span class="p">(</span><span class="n">simulated_path</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="c1"># total time spent in MD state, ill health and functionally disabled </span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="n">total_time_state_MD</span> <span class="o">&lt;-</span> <span class="nf">health5_total_time_stats</span><span class="p">(</span><span class="n">simulated_path</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="c1"># produce mean and variance of first time into M state</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="n">first_time_M_stats</span> <span class="o">&lt;-</span> <span class="nf">health5_stats_produce</span><span class="p">(</span><span class="n">time_to_M</span><span class="p">)</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="c1"># produce mean and variance of time spent in MD state</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="n">total_time_in_MD_stats</span> <span class="o">&lt;-</span> <span class="nf">health5_stats_produce</span><span class="p">(</span><span class="n">total_time_state_MD</span><span class="p">)</span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../stats_3/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 3-State Model" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              3-State Model
            </div>
          </div>
        </a>
      
      
        
        <a href="../../workflow/" class="md-footer__link md-footer__link--next" aria-label="Next: Workflow Example" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Workflow Example
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.960e086b.min.js"></script>
      
        <script src="../../../expand.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>